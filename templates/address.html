<!DOCTYPE html>
<html lang="en">
<head>
    <title>Address Search</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <!-- Header -->
    <header>
        Community Marketplace - Buy, Sell, Trade
    </header>

    <!-- Main Content -->
    <div class="container">
        <h1>Search for an Address</h1>
        <input type="text" id="addressInput" class="styled-input" placeholder="Start typing an address...">
        <div id="suggestions"></div>
    </div>

    <script>
        async function getAddressSuggestions(query) {
            if (query.length < 3) return; // Avoid unnecessary requests for short queries
            
            let url = `/address/search_address?query=${encodeURIComponent(query)}`;
            let response = await fetch(url);
            let data = await response.json();

            let suggestions = document.getElementById("suggestions");
            suggestions.innerHTML = "";

            data.forEach(item => {
                let div = document.createElement("div");
                div.classList.add("suggestion-item");
                div.innerText = item.display_name;
                div.onclick = () => {
                    document.getElementById("addressInput").value = item.display_name;
                    suggestions.innerHTML = "";
                };
                suggestions.appendChild(div);
            });
        }

        document.getElementById("addressInput").addEventListener("input", (e) => {
            getAddressSuggestions(e.target.value);
        });
    </script>
</body>
</html>
